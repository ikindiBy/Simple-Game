{"version":3,"sources":["webpack:///webpack/bootstrap dd1c6f070bcb9e793005","webpack:///./src/Entity.js","webpack:///./src/math.js","webpack:///./src/Traits/Killable.js","webpack:///./src/drawInfo.js","webpack:///./src/createPlayerEnvironment.js","webpack:///./src/Traits/Jump.js","webpack:///./src/Traits/Go.js","webpack:///./src/Traits/Physics.js","webpack:///./src/loaders.js","webpack:///./src/spritesheet.js","webpack:///./src/app.js","webpack:///./src/game-field.js","webpack:///./src/timer.js","webpack:///./src/layers/collision.js","webpack:///./src/layers/camera.js","webpack:///./src/Entities/Cosmo.js","webpack:///./src/BoundingBox.js","webpack:///./src/Traits/Stomper.js","webpack:///./src/Traits/Falling.js","webpack:///./src/Traits/StateCosmo.js","webpack:///./src/Traits/Dashboard.js","webpack:///./src/Traits/PlayerController.js","webpack:///./src/input.js","webpack:///./src/keyboardState.js","webpack:///./src/debug.js","webpack:///./src/Sprite.js","webpack:///./src/TileCollider.js","webpack:///./src/TileResolver.js","webpack:///./src/EntityCollider.js","webpack:///./src/animations.js","webpack:///./src/Camera.js","webpack:///./src/Sounds.js","webpack:///./src/layers/background.js","webpack:///./src/createEntities.js","webpack:///./src/Entities/Enemies.js","webpack:///./src/Traits/PendulumWalk.js","webpack:///./src/Entities/Artefacts.js","webpack:///./src/Font.js","webpack:///./style/css/style.css","webpack:///./style/scss/style.scss"],"names":["Sides","TOP","Symbol","BOTTOM","LEFT","RIGHT","Trait","constructor","name","NAME","obstruct","collides","us","them","update","Entity","pos","vel","size","offset","startPosition","lifetime","bounds","traits","player","sounds","addTrait","trait","push","side","forEach","candidate","deltaTime","sprites","context","Matrix","grid","get","x","y","col","undefined","set","value","Vect","Killable","dead","deadTime","removeAfter","kill","revive","entity","pictures","deadPic","entities","delete","showGameOver","buffer","tiles","drawImage","font","strokeStyle","strokeText","showCongratulations","fillStyle","fillText","drawStartMenu","draw","print","drawPauseScreen","document","createElement","getContext","setAttribute","fillRect","lineWidth","beginPath","moveTo","lineTo","stroke","closePath","showPause","createCosmo","createCosmoFactory","cosmo","createPlayerEnv","input","setupKeyboard","listenTo","window","playerEntity","playerControl","checkPoint","Jump","duration","velocity","engageTime","ready","requestTime","gracePeriod","speedBoost","start","cancel","Math","abs","Go","dir","speed","acceleration","deceleration","dragFactor","distance","heading","maxSpeed","absX","decel","min","drag","Physics","countPatrol","includes","distanceAll","pendulumWalk","deltaDistance","amplitudePatrol","positionBySinusoid","sin","PI","killable","tileCollider","checkX","camera","checkY","gravity","loadImage","url","Promise","resolve","image","Image","addEventListener","src","loadJSON","fetch","then","response","json","Spritesheet","data","Map","TILE_SIZE","define","buffers","map","flip","png","frame","width","height","scale","translate","deltaX","deltaY","drawTiles","type","x1","x2","y1","y2","getEntitiesByName","canvas","getElementById","game","all","tileImage","tileData","fontData","fontImage","sprite","createLevelCompositor","letter","event","code","removeEventListener","drawField","timer","restart","bind","stopTimer","e","level","_stop","stop","Timer","_start","lastTime","accumulatedTime","updateProxy","time","enqueue","requestAnimationFrame","drawEntityBox","drawBoundingBoxes","rect","left","top","createTileCandidateLayer","resolvedTiles","tileResolver","tileSize","getByIndexOriginal","getByIndex","getByIndexFake","call","drawTileCandidates","length","createCollisionLayer","drawCollisions","createCameraLayer","cameraToDraw","drawCameraRect","fromCamera","SLOW_DRAG","FAST_DRAG","setTurboState","turtleOn","go","setTurtleState","turboOn","add","turboAndSlow","slowAndTurbo","BoundingBox","overlaps","box","bottom","right","Stomper","queueBounce","bounceSpeed","bounce","Falling","stateCosmo","alive","playerController","death","playSound","StateCosmo","lives","coins","keys","locks","updateTimer","Dashboard","round","TIME_LIMIT","PlayerController","stopTime","gameOver","has","addMapping","keyState","jump","PRESSED","RELEASED","KeyboardState","keyStates","keyMap","callback","handleEvent","preventDefault","eventName","setupMouseControl","lastEvent","buttons","offsetX","offsetY","Sprite","Set","tilesMatrix","entityCollider","drawEntity","drawCosmo","frames","runAnim","createAnimation","routeFrame","result","layout","createEntities","createPlayerEnvironment","drawLevel","drawBackground","catch","console","log","max","picture","check","TileCollider","tileLayout","matrix","matches","searchByRange","match","reachEdge","stepToEdge","nextTile","TileResolver","toIndex","floor","toIndexRange","pos1","pos2","pMax","ceil","range","indexX","indexY","tile","searchByPosition","posX","posY","EntityCollider","frameLen","resolveFrame","frameIndex","frameName","Camera","Sounds","loadedSounds","loas","play","sound","Audio","load","bufferContext","backgrounds","xLen","drawBackgroundLayer","createEnemy","createEnemiesFactory","createArtefact","createArtefactsFactory","species","sizeX","sizeY","velX","velY","positions","reverse","artefacts","artef","arrPositions","Behavior","enemy","stomper","sequence","Array","from","PendulumWalk","randomForPatrol","random","artefact","Font","text","index"],"mappings":"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","file":"bundle/js/app.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 10);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap dd1c6f070bcb9e793005","import {Vect} from './math';\r\nimport BoundingBox from './BoundingBox.js';\r\n\r\n\r\nexport const Sides = {\r\n        TOP: Symbol('top'),\r\n        BOTTOM: Symbol('bottom'),\r\n        LEFT: Symbol('left'),\r\n        RIGHT: Symbol('right'),\r\n    };\r\n\r\nexport class Trait {\r\n    constructor(name) {\r\n        this.NAME = name;\r\n    }\r\n\r\n    obstruct() {\r\n\r\n    }\r\n\r\n    collides(us, them) {\r\n\r\n    }\r\n\r\n    update() {\r\n\r\n    }\r\n}\r\n\r\nexport default class Entity {\r\n    constructor(name) {\r\n        this.name = name;\r\n        this.pos = new Vect(0,0);\r\n        this.vel = new Vect(0,0);\r\n        this.size = new Vect(0,0);\r\n        this.offset = new Vect(0,0);\r\n        this.startPosition = new Vect(0,0);\r\n\r\n        this.lifetime = 0;\r\n        this.bounds = new BoundingBox(this.pos, this.size, this.offset);\r\n\r\n        this.traits = [];\r\n\r\n        this.player = false;\r\n\r\n        this.sounds;\r\n    }\r\n\r\n    addTrait(trait) {\r\n        this.traits.push(trait);\r\n        this[trait.NAME] = trait;\r\n    }\r\n\r\n    obstruct(side) {\r\n        this.traits.forEach( trait => {\r\n            trait.obstruct(this, side);\r\n        });\r\n    }\r\n\r\n    collides(candidate) {\r\n        this.traits.forEach( trait => {\r\n            trait.collides(this, candidate);\r\n        });\r\n    }\r\n\r\n    update(deltaTime, sprites, context) {\r\n        this.traits.forEach( trait => {\r\n            trait.update(this, deltaTime, sprites, context);\r\n        })\r\n\r\n        this.lifetime += deltaTime;\r\n\r\n        this.sounds = sprites.sounds;\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/Entity.js","export class Matrix {\r\n    constructor() {\r\n        this.grid = [];\r\n    }\r\n\r\n    get(x,y) {\r\n        const col = this.grid[x];\r\n        if (col) {\r\n            return col[y];\r\n        }\r\n        return undefined;\r\n    }\r\n\r\n    set(x, y, value) {\r\n        if (!this.grid[x]) {\r\n            this.grid[x] = [];\r\n        }\r\n\r\n        this.grid[x][y] = value;\r\n    }\r\n}\r\n\r\nexport class Vect {\r\n    constructor(x, y) {\r\n        this.set(x,y);\r\n    }\r\n    set(x, y) {\r\n        this.x = x;\r\n        this.y = y;\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/math.js","import {Sides, Trait} from '../Entity';\r\n\r\nexport default class Killable extends Trait {\r\n    constructor() {\r\n        super('killable');\r\n        this.dead = false;\r\n        this.deadTime = 0;\r\n        this.removeAfter = 2;\r\n    }\r\n\r\n    kill(){\r\n        this.dead = true;\r\n    }\r\n\r\n    revive () {\r\n        this.dead = false;\r\n        this.deadTime = 0;\r\n    }\r\n\r\n    update(entity, deltaTime, sprites) {\r\n        if (this.dead) {\r\n            if (!entity.player) {\r\n                entity.pictures = entity.deadPic;\r\n            } else {\r\n                sprites.entities.delete(entity);\r\n            }\r\n\r\n            if (entity.name === 'purple') {\r\n                entity.offset.y = -180;\r\n            } else if (entity.name === 'green') {\r\n                entity.offset.y = -62;\r\n            }\r\n\r\n            this.deadTime += deltaTime;\r\n\r\n            if (this.deadTime > this.removeAfter) {\r\n                sprites.entities.delete(entity);\r\n            }\r\n        }\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/Traits/Killable.js","\r\nexport function showGameOver(sprites) {\r\n    const buffer = sprites.tiles.get(`bg.png`)[0];\r\n\r\n    return function(context) {\r\n        context.drawImage(buffer, 0, 0, 960, 629);\r\n\r\n        context.font = \"50px Verdana\";\r\n        context.strokeStyle = \"red\";\r\n        context.strokeText(`GAME OVER`, 320, 210);\r\n        context.strokeText(`PRESS RESTART BUTTON`, 170, 310);\r\n        context.strokeText(`Key \"R\"`, 380, 410);\r\n    }\r\n}\r\n\r\nexport function showCongratulations(sprites) {\r\n    const buffer = sprites.tiles.get(`bg.png`)[0];\r\n\r\n    return function(context) {\r\n        context.drawImage(buffer, 0, 0, 960, 629);\r\n\r\n        context.font = \"50px Verdana\";\r\n        context.strokeStyle = \"lightblue\";\r\n        context.strokeText(`CONGRATULATIONS`, 250, 320);\r\n\r\n        context.font = \"italic 25px Helvetica\";\r\n        context.fillStyle = \"darkSlateBlue\";\r\n        context.fillText(`no more levels`, 10, 570);\r\n        context.fillText(`key \"R\" to restart`, 10, 600);\r\n    }\r\n}\r\n\r\nexport function drawStartMenu(context, sprites, font) {\r\n\r\n    sprites.draw('bg', context, 0, 0);\r\n    font.print('PRESS', context, 150, 50, 60, 60);\r\n    sprites.draw('boy1', context, 80, 210);\r\n    sprites.draw('boy2', context, 120, 210);\r\n    sprites.draw('boy3', context, 160, 210);\r\n    sprites.draw('boy2', context, 200, 210);\r\n    font.print('ENTER', context, 340, 208, 60, 60);\r\n    sprites.draw('boy4', context, 780, 210);\r\n    font.print('TO', context, 150, 350, 60, 60);\r\n    font.print('START', context, 350, 450, 60, 60);\r\n\r\n}\r\n\r\nexport function drawPauseScreen() {\r\n    const buffer = document.createElement('canvas');\r\n    const context = buffer.getContext('2d');\r\n    buffer.setAttribute('width', 960);\r\n    buffer.setAttribute('height', 629);\r\n\r\n    context.fillStyle = 'rgba(0, 0, 0, 0.5)';\r\n    context.fillRect(0, 0, 960, 629);\r\n\r\n    context.lineWidth = 40;\r\n    context.strokeStyle = \"red\";\r\n\r\n    context.strokeStyle = \"rgba(222, 22, 220, 0.5)\";\r\n\r\n    context.beginPath();\r\n    context.moveTo(420, 250);\r\n    context.lineTo(420,370);\r\n    context.stroke();\r\n    context.closePath();\r\n\r\n    context.beginPath();\r\n    context.moveTo(500, 250);\r\n    context.lineTo(500,370);\r\n    context.stroke();\r\n\r\n    context.font = \"40px Verdana\";\r\n    context.fillStyle = \"rgba(222, 22, 220, 0.4)\";\r\n    context.fillText(`press \"P\" to play`, 20, 600);\r\n\r\n    return function showPause(context) {\r\n        context.drawImage(buffer, 0, 0);\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/drawInfo.js","import {createCosmoFactory} from './Entities/Cosmo';\r\nimport PlayerController from './Traits/PlayerController';\r\nimport setupKeyboard from './input';\r\nimport {setupMouseControl} from './debug';\r\n\r\nexport default function(sprites) {\r\n    const createCosmo = createCosmoFactory(sprites);\r\n    const cosmo = createCosmo();\r\n\r\n    createPlayerEnv(cosmo);\r\n\r\n    const input = setupKeyboard(cosmo);\r\n    // setupMouseControl(canvas, cosmo, sprites.camera);\r\n    input.listenTo(window);\r\n}\r\n\r\nfunction createPlayerEnv (playerEntity) {\r\n    const playerControl = new PlayerController(playerEntity);\r\n    playerControl.checkPoint.set(42, 42);\r\n    playerEntity.addTrait(playerControl);\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/createPlayerEnvironment.js","\r\nimport {Trait, Sides} from '../Entity';\r\n\r\n\r\nexport default class Jump extends Trait {\r\n    constructor() {\r\n        super('jump');\r\n\r\n        this.duration = 0.5;\r\n        this.velocity = 200;\r\n        this.engageTime = 0;\r\n\r\n        this.ready = 1;\r\n        this.requestTime = 0;\r\n        this.gracePeriod = 0.5;\r\n\r\n        this.speedBoost = 0.3;\r\n    }\r\n\r\n    start() {\r\n        this.requestTime = this.gracePeriod;\r\n    }\r\n\r\n    cancel() {\r\n        this.engageTime = 0;\r\n        this.requestTime = 0;\r\n    }\r\n\r\n    obstruct(entity, side) {\r\n        if (side === Sides.BOTTOM) {\r\n            this.ready = 1;\r\n        } else if (side === Sides.TOP) {\r\n            this.cancel();\r\n        }\r\n    }\r\n\r\n    update(entity, deltaTime) {\r\n        if (this.requestTime > 0) {\r\n            if (this.ready > 0) {\r\n                this.engageTime = this.duration;\r\n                this.requestTime = 0;\r\n            }\r\n            this.requestTime -= deltaTime;\r\n        }\r\n\r\n        if (this.engageTime > 0) {\r\n            entity.vel.y = -(this.velocity + Math.abs(entity.vel.x) * this.speedBoost);\r\n            this.engageTime -= deltaTime;\r\n        }\r\n\r\n        this.ready--;\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/Traits/Jump.js","import {Trait} from '../Entity';\r\n\r\nexport default class Go extends Trait {\r\n    constructor() {\r\n        super('go');\r\n        this.dir = 0;\r\n        this.speed = 12000;\r\n\r\n        this.acceleration = 500;\r\n        this.deceleration = 350;\r\n        this.dragFactor = 1/5000;\r\n\r\n        this.distance = 0;\r\n        this.heading = 1;\r\n    }\r\n\r\n    update(entity, deltaTime) {\r\n        const maxSpeed = this.speed * deltaTime * this.dir;\r\n        const absX = Math.abs(entity.vel.x);\r\n\r\n        if (this.dir !== 0) {\r\n                entity.vel.x += this.acceleration * deltaTime * this.dir;\r\n                this.heading = this.dir;\r\n\r\n            } else if (entity.vel.x !== 0) {\r\n                let decel = Math.min(absX, this.deceleration * deltaTime);\r\n                entity.vel.x += entity.vel.x > 0 ? -decel : decel;\r\n            } else {\r\n                this.distance = 0;\r\n            }\r\n\r\n        const drag = this.dragFactor * entity.vel.x * absX;\r\n        entity.vel.x -= drag;\r\n\r\n        this.distance += absX * deltaTime;\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/Traits/Go.js","import {Sides, Trait} from '../Entity.js';\r\n\r\nexport default class Physics extends Trait {\r\n    constructor() {\r\n        super('physics');\r\n\r\n        this.countPatrol = 0;\r\n    }\r\n\r\n    update(entity, deltaTime, sprites) {\r\n\r\n        if (entity.name.includes('black')) {\r\n\r\n            let distanceAll = Math.abs(entity.pendulumWalk.speed) * entity.lifetime;\r\n            let deltaDistance = distanceAll - this.countPatrol * entity.pendulumWalk.amplitudePatrol;\r\n            let positionBySinusoid = 1 - Math.sin(Math.PI * entity.lifetime)/15;\r\n\r\n            if (deltaDistance > entity.pendulumWalk.amplitudePatrol) {\r\n\r\n                this.countPatrol++;\r\n                entity.pendulumWalk.speed = -entity.pendulumWalk.speed;\r\n            }\r\n\r\n            if (!entity.killable.dead) {\r\n                entity.vel.y = 0;\r\n                entity.pos.y = entity.startPosition.y * positionBySinusoid;\r\n            }\r\n        }\r\n\r\n        entity.pos.x += entity.vel.x * deltaTime;\r\n        sprites.tileCollider.checkX(entity, sprites.camera);\r\n\r\n        entity.pos.y += entity.vel.y * deltaTime;\r\n        sprites.tileCollider.checkY(entity, sprites.camera);\r\n\r\n        entity.vel.y += sprites.gravity * deltaTime;\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/Traits/Physics.js","export function loadImage(url) {\r\n    return new Promise( resolve => {\r\n        const image = new Image();\r\n        image.addEventListener('load', () => {\r\n            resolve(image);\r\n        });\r\n        image.src = url;\r\n    })\r\n}\r\n\r\nexport function loadJSON(name) {\r\n    return fetch(`./src/database/${name}.json`)\r\n    .then(response => response.json());\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/loaders.js","import Camera from './Camera';\r\n\r\nexport default class Spritesheet {\r\n    constructor(image, data) {\r\n        this.image = image;\r\n        this.data = data;\r\n        this.tiles = new Map();\r\n\r\n        this.camera = new Camera();\r\n        this.TILE_SIZE = 37;\r\n    }\r\n\r\n    define(name) {\r\n        const buffers = [false, true].map(flip => {\r\n            const buffer = document.createElement('canvas');\r\n            const context = buffer.getContext('2d');\r\n            const png = this.data[`${name}`].frame;\r\n            buffer.width = png['w'];\r\n            buffer.height = png['h'];\r\n\r\n            if (flip) {\r\n                context.scale(-1, 1);\r\n                context.translate(-buffer.width, 0);\r\n            }\r\n\r\n            if (png['w'] < this.TILE_SIZE && png['h'] < this.TILE_SIZE && !name.includes('enemy')) {\r\n                buffer.width = this.TILE_SIZE;\r\n                buffer.height = this.TILE_SIZE;\r\n                let deltaX = (this.TILE_SIZE - png['w'])/2;\r\n                let deltaY = (this.TILE_SIZE - png['h'])/2;\r\n                context.drawImage(this.image, png['x'], png['y'], png['w'], png['h'],\r\n                                               deltaX,  deltaY,   png['w'], png['h']);\r\n            } else {\r\n                context.drawImage(this.image, png['x'], png['y'], png['w'], png['h'],\r\n                                             0,         0,        png['w'], png['h']);\r\n            }\r\n            return buffer;\r\n        });\r\n        this.tiles.set(name, buffers);\r\n    }\r\n\r\n    // draw(name, context, x, y, type, flip) {\r\n    //     const buffer = this.tiles.get(`${name}.png`)[flip ? 1 : 0];\r\n    //     context.drawImage(buffer, x - this.camera.pos.x, y - this.camera.pos.y);\r\n    // }\r\n\r\n    drawTiles(name, context, type, x1, x2, y1, y2) {\r\n        for (let x = x1; x < x2; ++x) {\r\n            for (let y = y1; y < y2; ++y) {\r\n                this.draw(name, context, x, y, type);\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    getEntitiesByName(name) {\r\n        let entities = [];\r\n        this.entities.forEach(value => {\r\n            if (value.name == name) {\r\n                entities.push(value);\r\n            }\r\n        });\r\n        return entities;\r\n    }\r\n\r\n    update(deltaTime, context) {\r\n\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/spritesheet.js","import drawField from './game-field';\r\nimport {loadImage,loadJSON} from './loaders';\r\nimport Sprite from './Sprite';\r\nimport Font from './Font';\r\nimport {drawStartMenu} from './drawInfo';\r\n\r\nconst canvas = document.getElementById('canvas');\r\nconst context = canvas.getContext('2d');\r\ncanvas.setAttribute('width', 960);\r\ncanvas.setAttribute('height', 629);\r\n\r\nconst game = Promise.all([\r\n    loadImage('./images/sprites.png'),\r\n    loadJSON('./sprites'),\r\n    loadJSON('./alphabet'),\r\n    loadImage('./images/alphabet.png')\r\n])\r\n.then(async ([tileImage, tileData, fontData, fontImage]) => {\r\n\r\n    const sprites = new Sprite(tileImage, tileData);\r\n    for (let sprite in tileData) {\r\n        sprites.define(sprite);\r\n    }\r\n    await sprites.createLevelCompositor();\r\n\r\n    const font = new Font(fontImage, fontData);\r\n    for (let letter in fontData) {\r\n        font.define(letter);\r\n    }\r\n\r\n    drawStartMenu(context, sprites, font);\r\n    window.addEventListener('keypress', start);\r\n\r\n    return [sprites, font];\r\n})\r\n\r\nconst start = (event) => {\r\n    if (event.code === 'Enter') {\r\n        window.removeEventListener('keypress', start);\r\n\r\n        game.then(([sprites, font]) => {\r\n            drawField(context, sprites);\r\n        })\r\n    }\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app.js","import Timer from './timer';\r\nimport createCollisionLayer from './layers/collision';\r\nimport createCameraLayer from './layers/camera';\r\nimport createPlayerEnvironment from './createPlayerEnvironment';\r\nimport {drawPauseScreen} from './drawInfo';\r\n\r\nexport default function drawField(context, sprites) {\r\n\r\n    // const drawCollisions = createCollisionLayer(sprites);\r\n    // const drawCameraView = createCameraLayer(sprites.camera);\r\n\r\n    const timer = new Timer(1/60);\r\n    timer.update = function update(deltaTime) {\r\n        sprites.update(deltaTime, context);\r\n        // drawCollisions(context, sprites.camera);\r\n        // drawCameraView(context, sprites.camera);\r\n    }\r\n    timer.start();\r\n\r\n\r\n    window.addEventListener('keypress', restart.bind(this, sprites));\r\n    window.addEventListener('keypress', stopTimer.bind(this, timer, context));\r\n}\r\n\r\nconst restart = async (sprites, e) => {\r\n    if (e.code === 'KeyR') {\r\n        sprites.level = 1;\r\n        await sprites.createLevelCompositor();\r\n    }\r\n};\r\n\r\nconst stopTimer = (timer, context, e) => {\r\n    if (e.code === 'KeyP') {\r\n        if (timer._stop) {\r\n            timer.start();\r\n        } else {\r\n            timer.stop();\r\n            showPause(context);\r\n        }\r\n    }\r\n};\r\n\r\nconst showPause = drawPauseScreen();\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/game-field.js","export default class Timer {\r\n    constructor(deltaTime = 1/60) {\r\n        this._start = true;\r\n        this._stop = false;\r\n\r\n        let lastTime = 0;\r\n        let accumulatedTime = 0;\r\n\r\n        this.updateProxy = (time) => {\r\n            if (!this._stop) {\r\n                if (this._start || time - lastTime > 3000) {\r\n                    lastTime = time;\r\n                    this._start = false;\r\n                }\r\n\r\n                accumulatedTime += (time - lastTime) / 1000;\r\n                while (accumulatedTime > deltaTime) {\r\n                    this.update(deltaTime);\r\n                    accumulatedTime -= deltaTime;\r\n                }\r\n\r\n                lastTime = time;\r\n                this.enqueue();\r\n            }\r\n        }\r\n    }\r\n\r\n    enqueue() {\r\n        requestAnimationFrame(this.updateProxy);\r\n    }\r\n\r\n    start() {\r\n        this.enqueue();\r\n        this._stop = false;\r\n    }\r\n\r\n    stop() {\r\n        this._start = true;\r\n        this._stop = true;\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/timer.js","function drawEntityBox(entities) {\r\n    return function drawBoundingBoxes(context, camera) {\r\n        context.strokeStyle = 'red';\r\n        entities.forEach(entity => {\r\n            context.beginPath();\r\n            context.rect(entity.bounds.left - camera.pos.x,\r\n                         entity.bounds.top - camera.pos.y,\r\n                         entity.size.x, entity.size.y);\r\n            context.stroke();\r\n        });\r\n    }\r\n}\r\n\r\nfunction createTileCandidateLayer(tileCollider) {\r\n    const resolvedTiles = [];\r\n\r\n    const tileResolver = tileCollider.tiles;\r\n    const tileSize = tileResolver.tileSize\r\n\r\n    const getByIndexOriginal = tileResolver.getByIndex;\r\n\r\n    tileResolver.getByIndex = function getByIndexFake(x, y) {\r\n        resolvedTiles.push({x,y});\r\n        return getByIndexOriginal.call(tileResolver, x, y);\r\n    }\r\n\r\n    return function drawTileCandidates(context, camera) {\r\n        context.strokeStyle = 'blue';\r\n        resolvedTiles.forEach(({x,y}) => {\r\n            context.beginPath();\r\n            context.rect(x * tileSize - camera.pos.x,\r\n                         y * tileSize - camera.pos.y,\r\n                         tileSize, tileSize);\r\n            context.stroke();\r\n        });\r\n\r\n        resolvedTiles.length = 0;\r\n    }\r\n}\r\n\r\nexport default function createCollisionLayer(sprites) {\r\n\r\n    const drawTileCandidates = createTileCandidateLayer(sprites.tileCollider);\r\n    const drawBoundingBoxes = drawEntityBox(sprites.entities);\r\n\r\n    return function drawCollisions(context, camera) {\r\n        drawTileCandidates(context, camera);\r\n        drawBoundingBoxes(context, camera);\r\n    };\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/layers/collision.js","export default function createCameraLayer(cameraToDraw) {\r\n    return function drawCameraRect(context, fromCamera) {\r\n        context.strokeStyle = 'purple';\r\n        context.beginPath();\r\n        context.rect(cameraToDraw.pos.x - fromCamera.pos.x,\r\n                     cameraToDraw.pos.y - fromCamera.pos.y,\r\n                     cameraToDraw.size.x, cameraToDraw.size.y);\r\n        context.stroke();\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/layers/camera.js","import Entity from '../Entity';\r\n\r\nimport Jump from '../Traits/Jump';\r\nimport Go from '../Traits/Go';\r\nimport Stomper from '../Traits/Stomper';\r\nimport Physics from '../Traits/Physics';\r\nimport Killable from '../Traits/Killable'\r\nimport Falling from '../Traits/Falling';\r\nimport StateCosmo from '../Traits/StateCosmo';\r\nimport Dashboard from '../Traits/Dashboard';\r\n\r\nconst SLOW_DRAG = 1/2000;\r\nconst FAST_DRAG = 1/5000;\r\n\r\nexport function createCosmoFactory(sprites) {\r\n\r\n    function setTurboState(turtleOn) {\r\n      this.go.dragFactor = turtleOn ? SLOW_DRAG : FAST_DRAG;\r\n    }\r\n\r\n    function setTurtleState(turboOn) {\r\n      this.go.dragFactor = turboOn ? FAST_DRAG : SLOW_DRAG;\r\n    }\r\n\r\n    return function createCosmo() {\r\n        const cosmo = new Entity('cosmo');\r\n\r\n        cosmo.player = true;\r\n\r\n        cosmo.size.set(20, 50);\r\n\r\n        cosmo.pos.set(185, 420);\r\n        cosmo.vel.set(0, -600);\r\n        cosmo.offset.set(9, 0);\r\n\r\n        sprites.entities.add(cosmo);\r\n\r\n        cosmo.addTrait(new Physics());\r\n        cosmo.addTrait(new Jump());\r\n        cosmo.addTrait(new Go());\r\n        cosmo.addTrait(new Stomper());\r\n        cosmo.addTrait(new Killable());\r\n        cosmo.addTrait(new Falling());\r\n        cosmo.addTrait(new StateCosmo());\r\n        cosmo.addTrait(new Dashboard());\r\n\r\n\r\n        cosmo.turboAndSlow = setTurboState;\r\n        cosmo.slowAndTurbo = setTurtleState;\r\n\r\n        return cosmo;\r\n    };\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/Entities/Cosmo.js","export default class BoundingBox {\r\n    constructor(pos, size, offset) {\r\n        this.pos = pos;\r\n        this.size = size;\r\n        this.offset = offset;\r\n    }\r\n\r\n    overlaps(box) {\r\n        return this.bottom > box.top\r\n            && this.top < box.bottom\r\n            && this.left < box.right\r\n            && this.right > box.left;\r\n    }\r\n\r\n    get bottom() {\r\n        return this.pos.y + this.size.y + this.offset.y;\r\n    }\r\n\r\n    set bottom(y) {\r\n        this.pos.y = y - (this.size.y + this.offset.y);\r\n    }\r\n\r\n    get top() {\r\n        return this.pos.y + this.offset.y;\r\n    }\r\n\r\n    set top(y) {\r\n        this.pos.y = y - this.offset.y;\r\n    }\r\n\r\n    get left() {\r\n        return this.pos.x + this.offset.x;\r\n    }\r\n\r\n    set left(x) {\r\n        this.pos.x = x - this.offset.x;\r\n    }\r\n\r\n    get right() {\r\n        return this.pos.x + this.size.x + this.offset.x;\r\n    }\r\n\r\n    set right(x) {\r\n        this.pos.x = x - (this.size.x + this.offset.x);\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/BoundingBox.js","import {Sides, Trait} from '../Entity.js';\r\n\r\nexport default class Stomper extends Trait {\r\n    constructor() {\r\n        super('stomper');\r\n        this.queueBounce = false;\r\n        this.bounceSpeed = 400;\r\n    }\r\n\r\n    bounce() {\r\n        this.queueBounce = true;\r\n    }\r\n\r\n    update(entity) {\r\n        if (this.queueBounce) {\r\n            entity.vel.y = -this.bounceSpeed;\r\n            this.queueBounce = false;\r\n        }\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/Traits/Stomper.js","import {Trait} from '../Entity';\r\n\r\nexport default class Falling extends Trait {\r\n    constructor() {\r\n        super('falling');\r\n    }\r\n\r\n    update(entity, deltaTime, sprites) {\r\n        if (entity.pos.y > 800 && entity.stateCosmo.alive) {\r\n            entity.playerController.death(entity, sprites);\r\n            entity.sounds.playSound('fallInAbyss');\r\n        }\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/Traits/Falling.js","import {Trait} from '../Entity';\r\n\r\nexport default class StateCosmo extends Trait {\r\n    constructor() {\r\n        super('stateCosmo');\r\n        this.lives = 3;\r\n        this.coins = 0;\r\n        this.keys = 0;\r\n        this.locks = 0;\r\n        this.alive = true;\r\n    }\r\n\r\n    update(entity, deltaTime, sprites) {\r\n\r\n        if (this.coins > 50) {\r\n            this.coins = 0;\r\n            this.lives++;\r\n        }\r\n\r\n        if (this.locks === 1) {\r\n            this.locks = 0;\r\n            sprites.level++;\r\n            sprites.createLevelCompositor('won');\r\n            entity.playerController.updateTimer();\r\n        }\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/Traits/StateCosmo.js","import {Trait} from '../Entity';\r\n\r\nexport default class Dashboard extends Trait {\r\n    constructor() {\r\n        super('dashboard');\r\n    }\r\n\r\n    update(entity, deltaTime, sprites, context) {\r\n        const time = Math.round(entity.playerController.time);\r\n\r\n    \tcontext.font = \"22px Verdana\";\r\n\r\n        context.fillStyle = \"darkViolet\";\r\n        context.fillText(`LEVEL : 1`, 20, 22);\r\n        context.fillText(`COINS : ${entity.stateCosmo.coins}`, 160, 22);\r\n        context.fillText(`LIVES : ${entity.stateCosmo.lives}`, 300, 22);\r\n\r\n        context.fillText(`KEYS : ${entity.stateCosmo.keys}`, 460, 22);\r\n\r\n        context.fillText(`TIME : ${time}`, 840, 22);\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/Traits/Dashboard.js","import {Trait} from '../Entity';\r\nimport {Vect} from '../math';\r\n\r\nexport const TIME_LIMIT = 60;\r\n\r\nexport default class PlayerController extends Trait {\r\n    constructor(entity) {\r\n        super('playerController');\r\n\r\n        this.player = entity;\r\n        this.checkPoint = new Vect(0, 0);\r\n\r\n        this.time = TIME_LIMIT;\r\n        this.stopTime = false;\r\n    }\r\n\r\n    death(entity, sprites) {\r\n        this.player.stateCosmo.lives--;\r\n\r\n        if (this.player.stateCosmo.alive) {\r\n            this.player.killable.kill();\r\n        }\r\n\r\n        if (this.player.stateCosmo.lives > 0) {\r\n            this.player.killable.revive();\r\n            this.player.pos.set(this.checkPoint.x, this.checkPoint.y);\r\n            sprites.entities.add(this.player);\r\n        } else {\r\n            entity.stateCosmo.alive = false;\r\n            entity.sounds.playSound('gameOver');\r\n            sprites.gameOver();\r\n        }\r\n\r\n        this.updateTimer();\r\n    }\r\n\r\n    updateTimer() {\r\n        this.time = TIME_LIMIT;\r\n    }\r\n\r\n    update(entity, deltaTime, sprites, context) {\r\n        if (!sprites.entities.has(entity) && entity.stateCosmo.alive) {\r\n\r\n            this.death(entity, sprites);\r\n\r\n        } else if (!this.stopTime){\r\n\r\n            this.time -= deltaTime * sprites.level;\r\n        }\r\n\r\n        if (this.time <= 0) {\r\n            this.death(entity, sprites);\r\n        }\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/Traits/PlayerController.js","import KeyboardListener from './keyboardState';\r\n\r\nexport default function setupKeyboard(cosmo) {\r\n    const input = new KeyboardListener();\r\n\r\n    input.addMapping('Space', keyState => {\r\n        if (keyState) {\r\n            cosmo.jump.start();\r\n        } else {\r\n            cosmo.jump.cancel();\r\n        }\r\n    });\r\n\r\n    input.addMapping('ShiftLeft', keyState => {\r\n        cosmo.slowAndTurbo(keyState);\r\n    });\r\n\r\n    input.addMapping('ControlLeft', keyState => {\r\n        cosmo.turboAndSlow(keyState);\r\n    });\r\n\r\n    input.addMapping('ArrowRight', keyState => {\r\n        cosmo.go.dir += keyState ? 1 : -1;\r\n    });\r\n\r\n    input.addMapping('ArrowLeft', keyState => {\r\n        cosmo.go.dir += keyState ? -1 : 1;\r\n    });\r\n\r\n    input.addMapping('ArrowDown', keyState => {\r\n        cosmo.vel.y += 150;\r\n    });\r\n\r\n    input.addMapping('ArrowUp', keyState => {\r\n        if (keyState) {\r\n            cosmo.jump.start();\r\n        } else {\r\n            cosmo.jump.cancel();\r\n        }\r\n    });\r\n\r\n    return input;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/input.js","const PRESSED = 1;\r\nconst RELEASED = 0;\r\n\r\nexport default class KeyboardState {\r\n    constructor() {\r\n        this.keyStates = new Map();\r\n        this.keyMap = new Map();\r\n    }\r\n    addMapping(code, callback) {\r\n        this.keyMap.set(code, callback);\r\n    }\r\n    handleEvent(event){\r\n        const {code} = event;\r\n\r\n        if(!this.keyMap.has(code)) {\r\n            return;\r\n        }\r\n\r\n        event.preventDefault();\r\n\r\n        const keyState = event.type === 'keydown' ? PRESSED : RELEASED;\r\n\r\n        if (this.keyStates.get(code) === keyState) {\r\n            return;\r\n        }\r\n\r\n        this.keyStates.set(code, keyState);\r\n\r\n        this.keyMap.get(code)(keyState);\r\n    }\r\n\r\n    listenTo(window) {\r\n        ['keydown', 'keyup'].forEach(eventName => {\r\n            window.addEventListener(eventName, event => {\r\n                this.handleEvent(event)\r\n            });\r\n        });\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/keyboardState.js","export function setupMouseControl(canvas, entity, camera) {\r\n    let lastEvent;\r\n\r\n    ['mousedown', 'mousemove'].forEach(eventName => {\r\n        canvas.addEventListener(eventName, event => {\r\n            if (event.buttons === 1) {\r\n                entity.vel.set(0, 0);\r\n                entity.pos.set(event.offsetX + camera.pos.x,\r\n                               event.offsetY + camera.pos.y);\r\n            }\r\n        })\r\n    });\r\n\r\n    window.addEventListener('keydown', event => {\r\n        // console.log(event.code);\r\n        if (event.code === 'KeyD') {\r\n            camera.pos.x += 75;\r\n        }\r\n        if (event.code === 'KeyA') {\r\n            camera.pos.x -= 75;\r\n        }\r\n    });\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/debug.js","import {Matrix} from './math';\r\nimport TileCollider from './TileCollider';\r\nimport EntityCollider from './EntityCollider';\r\nimport {createAnimation} from './animations';\r\nimport Spritesheet from './spritesheet';\r\nimport Sounds from './Sounds';\r\n\r\nimport drawBackground from './layers/background';\r\nimport {loadJSON} from './loaders';\r\nimport {createEntities} from './createEntities';\r\nimport createPlayerEnvironment from './createPlayerEnvironment';\r\n\r\nimport {showGameOver, showCongratulations} from './drawInfo';\r\n\r\nexport default class Sprite extends Spritesheet {\r\n    constructor(image, data) {\r\n        super(image, data);\r\n\r\n        this.entities = new Set();\r\n        this.tilesMatrix = new Matrix();\r\n        this.sounds = new Sounds();\r\n\r\n        this.tileCollider = new TileCollider(this.tilesMatrix);\r\n        this.entityCollider = new EntityCollider(this.entities);\r\n\r\n        this.gravity = 2000;\r\n        this.level = 1;\r\n    }\r\n\r\n    draw(name, context, x, y, type, flip) {\r\n        const buffer = this.tiles.get(`${name}.png`)[flip ? 1 : 0];\r\n\r\n        if (type) {\r\n            if (type !== 'decor') {\r\n                this.tilesMatrix.set(x, y, {\r\n                    'name': name,\r\n                    'type': type\r\n                });\r\n            }\r\n        if (name.includes('coin') || name.includes('key')) {\r\n                x = x * this.TILE_SIZE;\r\n                y = y * this.TILE_SIZE;\r\n            } else {\r\n                x = x * buffer.width;\r\n                y = y * buffer.height;\r\n            }\r\n        }\r\n\r\n        context.drawImage(buffer, x - this.camera.pos.x, y - this.camera.pos.y);\r\n    }\r\n\r\n    drawEntity (name, context, x, y, flip = false) {\r\n            const buffer = this.tiles.get(`${name}.png`)[flip ? 0 : 1];\r\n            context.drawImage(buffer, x - this.camera.pos.x, y - this.camera.pos.y);\r\n    }\r\n\r\n    drawCosmo(cosmo, context) {\r\n        let buffer;\r\n\r\n        let frames = ['boy4.png', 'boy3.png', 'boy2.png', 'boy1.png'];\r\n\r\n        let runAnim = createAnimation(frames, 5);\r\n\r\n        function routeFrame (cosmo) {\r\n            if (cosmo.jump.ready < 0) {\r\n                return 'boy3.png';\r\n            }\r\n            if (cosmo.go.distance > 0) {\r\n               return runAnim(cosmo.go.distance);\r\n            }\r\n            return 'boy1.png';\r\n        }\r\n\r\n        buffer = this.tiles.get(routeFrame (cosmo))[cosmo.go.heading > 0 ? 0 : 1];\r\n\r\n        context.drawImage(buffer, cosmo.pos.x - this.camera.pos.x,\r\n                                  cosmo.pos.y - this.camera.pos.y);\r\n    }\r\n\r\n    createLevelCompositor(result) {\r\n        return loadJSON(`./levels/1-${this.level}`).then((layout) => {\r\n            this.entities.forEach(entity => {\r\n                if (!result) {\r\n                    this.entities.delete(entity);\r\n                } else {\r\n                    if (!entity.player) {\r\n                        this.entities.delete(entity);\r\n                    } else {\r\n                        entity.pos.set(100, 100);\r\n                    }\r\n                }\r\n            });\r\n            this.tilesMatrix.grid = [];\r\n            this.camera.pos.x = 0;\r\n\r\n            createEntities(this, layout);\r\n            if (!result) {\r\n                createPlayerEnvironment(this);\r\n            }\r\n\r\n            this.drawLevel = drawBackground(this, layout);\r\n        }).catch(e => {\r\n            console.log('Congratulations, no more levels');\r\n            console.log(e);\r\n            this.gameOver('done')\r\n        });\r\n    }\r\n\r\n    gameOver(result) {\r\n        this.entities.forEach(entity => {\r\n            this.entities.delete(entity);\r\n        });\r\n        this.tilesMatrix.grid = [];\r\n        this.camera.pos.x = 0;\r\n\r\n        if (!result) {\r\n            this.drawLevel = showGameOver(this);\r\n        } else {\r\n            this.drawLevel = showCongratulations(this);\r\n        }\r\n\r\n    }\r\n\r\n    update(deltaTime, context) {\r\n        this.drawLevel(context);\r\n        this.entities.forEach(entity => {\r\n            entity.update(deltaTime, this, context);\r\n\r\n            if (entity.name === 'cosmo') {\r\n                this.drawCosmo(entity, context);\r\n                this.camera.pos.x = entity.pos.x > 3040 ? 2740 : Math.max(0, entity.pos.x - 300);\r\n\r\n            } else if (entity.name.includes('key') || entity.name.includes('coin') || entity.name.includes('lock')) {\r\n                this.draw(entity.name, context, entity.pos.x , entity.pos.y )\r\n\r\n            } else if (entity.name !== 'cosmo') {\r\n                this.drawEntity(entity.picture, context, entity.pos.x, entity.pos.y, entity.pendulumWalk.speed > 0 ? 0 : 1);\r\n            }\r\n        });\r\n\r\n        this.entities.forEach(entity => {\r\n            if (entity.name !== 'cosmo') {\r\n                return;\r\n            } else {\r\n                this.entityCollider.check(entity);\r\n            }\r\n        });\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/Sprite.js","import TileResolver from './TileResolver';\r\nimport {Sides} from './Entity';\r\n\r\nexport default class TileCollider {\r\n    constructor(tileLayout) {\r\n        this.tiles = new TileResolver(tileLayout);\r\n    }\r\n\r\n    checkX(entity, camera) {\r\n        if (entity.pos.x < 0 ) {\r\n            entity.pos.x = 0;\r\n        }\r\n         if (entity.bounds.right > this.tiles.tileSize * this.tiles.matrix.grid.length) {\r\n            entity.pos.x = this.tiles.tileSize * this.tiles.matrix.grid.length - entity.size.x - entity.offset.x;\r\n            console.log(entity.pos.x);\r\n        }\r\n\r\n        let x;\r\n        if (entity.vel.x > 0) {\r\n            x = entity.bounds.right;\r\n        } else if (entity.vel.x < 0) {\r\n            x = entity.bounds.left;\r\n        } else {\r\n            return;\r\n        }\r\n\r\n        const matches = this.tiles.searchByRange(x, x,\r\n                                                 entity.bounds.top,\r\n                                                 entity.bounds.bottom);\r\n\r\n        matches.forEach( match => {\r\n            if (entity.vel.x > 0) {\r\n                if (entity.bounds.right > match.x1) {\r\n                    entity.bounds.right = match.x1;\r\n                    entity.vel.x = 0;\r\n\r\n                    entity.obstruct(Sides.RIGHT);\r\n                }\r\n            } else if (entity.vel.x < 0) {\r\n                if (entity.bounds.left < match.x2) {\r\n                    entity.bounds.left = match.x2;\r\n                    entity.vel.x = 0;\r\n\r\n                    entity.obstruct(Sides.LEFT);\r\n                }\r\n\r\n            }\r\n        });\r\n    }\r\n\r\n    checkY(entity) {\r\n        let y;\r\n        if (entity.vel.y > 0) {\r\n            y = entity.bounds.bottom;\r\n        } else if (entity.vel.y < 0) {\r\n            y = entity.bounds.top;\r\n        } else {\r\n            return;\r\n        }\r\n\r\n        const matches = this.tiles.searchByRange(entity.bounds.left,\r\n                                                 entity.bounds.right,\r\n                                                 y, y);\r\n\r\n        matches.forEach( match => {\r\n            if (entity.vel.y > 0) {\r\n                if (entity.bounds.bottom > match.y1) {\r\n\r\n                    entity.bounds.bottom = match.y1;\r\n                    entity.vel.y = 0;\r\n\r\n                    this.reachEdge(entity, y);\r\n\r\n                    entity.obstruct(Sides.BOTTOM);\r\n\r\n                }\r\n            } else if (entity.vel.y < 0) {\r\n                if (entity.bounds.top < match.y2) {\r\n                    entity.bounds.top = match.y2;\r\n                    entity.vel.y = 0;\r\n                    entity.obstruct(Sides.TOP);\r\n                }\r\n\r\n            }\r\n        });\r\n    }\r\n\r\n    reachEdge(entity, y) {\r\n        if (!entity.player) {\r\n\r\n            let stepToEdge = entity.size.x * Math.abs(entity.vel.x)/entity.vel.x;\r\n            stepToEdge = stepToEdge ? stepToEdge : 0;\r\n            let nextTile = this.tiles.searchByRange(entity.bounds.left + stepToEdge,\r\n                                                    entity.bounds.right + stepToEdge,\r\n                                                    y, y)[0];\r\n            if (!nextTile) {\r\n                entity.pendulumWalk.speed = -entity.pendulumWalk.speed;\r\n            }\r\n        }\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/TileCollider.js","// World position -> to tile indexes\r\nexport default class TileResolver {\r\n    constructor(matrix, tileSize = 37) {\r\n        this.matrix = matrix;\r\n        this.tileSize = tileSize;\r\n    }\r\n\r\n    toIndex(pos) {\r\n        return Math.floor(pos / this.tileSize);\r\n    }\r\n\r\n    toIndexRange(pos1, pos2) {\r\n        const pMax = Math.ceil(pos2 / this.tileSize) * this.tileSize;\r\n        const range = [];\r\n        let pos = pos1;\r\n        do {\r\n            range.push(this.toIndex(pos));\r\n            pos += this.tileSize;\r\n        } while (pos < pMax);\r\n        return range;\r\n    }\r\n\r\n    getByIndex(indexX, indexY) {\r\n        const tile = this.matrix.get(indexX, indexY);\r\n        if (tile) {\r\n            const x1 = indexX * this.tileSize;\r\n            const x2 = x1 + this.tileSize;\r\n\r\n            const y1 = indexY * this.tileSize;\r\n            const y2 = y1 + this.tileSize;\r\n            return {\r\n                tile,\r\n                x1,\r\n                x2,\r\n                y1,\r\n                y2\r\n            }\r\n        }\r\n    }\r\n\r\n    \r\n\r\n    searchByPosition(posX, posY) {\r\n        return this.getByIndex(\r\n            this.toIndex(posX),\r\n            this.toIndex(posY));\r\n    }\r\n\r\n    searchByRange(x1, x2, y1, y2) {\r\n        const matches = [];\r\n\r\n        this.toIndexRange(x1, x2).forEach(indexX => {\r\n            this.toIndexRange(y1, y2).forEach(indexY => {\r\n                const match = this.getByIndex(indexX, indexY);\r\n                if (match) {\r\n                    matches.push(match);\r\n                }\r\n            });\r\n        });\r\n\r\n        return matches;\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/TileResolver.js","export default class EntityCollider {\r\n    constructor(entities) {\r\n        this.entities = entities;\r\n    }\r\n\r\n    check(entity) {\r\n        this.entities.forEach(candidate => {\r\n            if (entity === candidate) {\r\n                return;\r\n            }\r\n\r\n            if (entity.bounds.overlaps(candidate.bounds)){\r\n                entity.collides(candidate);\r\n                candidate.collides(entity);\r\n            }\r\n        })\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/EntityCollider.js","export\tfunction createAnimation(frames, frameLen) {\r\n\t\treturn function resolveFrame(distance) {\r\n\t\t\tlet frameIndex = Math.floor(distance / frameLen % frames.length);\r\n\t\t\tlet frameName = frames[frameIndex];\r\n\t\t\treturn frameName;\r\n\t\t}\r\n\t}\n\n\n// WEBPACK FOOTER //\n// ./src/animations.js","import {Vect} from './math';\r\n\r\nexport default class Camera {\r\n    constructor(){\r\n        this.pos = new Vect(0, 0);\r\n        this.size = new Vect(960, 629)\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/Camera.js","\r\n\r\n\r\nexport default class Sounds{ \r\n\tconstructor() {\r\n\t\tthis.loadedSounds = new Map();\r\n\t\tthis.loas = [];\r\n\t}\r\n\r\n\tplaySound(name) {\r\n\r\n\t\tif (this.loadedSounds.has(name)) {\r\n\r\n\t\t\tthis.loadedSounds.get(name).play();\r\n\r\n\t\t} else {\r\n\r\n\t\t\tlet sound = new Audio (`sounds/${name}.mp3`);\r\n\t\t\tsound.load();\r\n\t\t\tsound.play();\r\n\r\n\t\t\tthis.loadedSounds.set(name, sound);\t\r\n\t\t}   \r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/Sounds.js","export default function drawBackground(sprites, layout) {\r\n    const buffer = document.createElement('canvas');\r\n    const bufferContext = buffer.getContext('2d');\r\n\r\n    const width = 37 * 100;\r\n    const height = 37 * 17;\r\n    buffer.setAttribute('width', width);\r\n    buffer.setAttribute('height', height);\r\n\r\n    layout.backgrounds.forEach( tile => {\r\n        const name = tile.name;\r\n        const type = tile.type;\r\n\r\n        tile.pos.forEach(range => {\r\n            switch(range.length) {\r\n                case 4: {\r\n                    sprites.drawTiles(name, bufferContext, type, ...range);\r\n                    break;\r\n                }\r\n                case 3: {\r\n                    let [x, xLen, y] = range;\r\n                    xLen += x;\r\n                    sprites.drawTiles(name, bufferContext, type, x, xLen, y, (y + 1));\r\n                    break;\r\n                }\r\n                case 2: {\r\n                    const [x, y] = range;\r\n                    sprites.drawTiles(name, bufferContext, type, x, (x + 1), y, (y + 1));\r\n                    break;\r\n                }\r\n            }\r\n        });\r\n\r\n    });\r\n\r\n    return function drawBackgroundLayer(context) {\r\n        context.drawImage(buffer, 0 - sprites.camera.pos.x,\r\n                                  0 - sprites.camera.pos.y);\r\n    };\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/layers/background.js","import {createEnemiesFactory} from './Entities/Enemies'\r\nimport {createArtefactsFactory} from './Entities/Artefacts'\r\n\r\nexport function createEntities(sprites, layout) {\r\n\r\n    const createEnemy = createEnemiesFactory(sprites);\r\n    const createArtefact = createArtefactsFactory(sprites);\r\n\r\n    layout.entities.forEach(species => {\r\n        const name = species.name;\r\n        const [sizeX, sizeY] = species.data.size;\r\n        const pictures = species.data.pictures;\r\n        const deadPic = species.data.deadPic;\r\n        const [velX, velY] = species.data.velocity;\r\n\r\n        species.positions.forEach(entity => {\r\n            const [posX, posY, reverse] = entity.pos;\r\n            const [offsetX, offsetY] = entity.offset;\r\n\r\n            createEnemy(name, posX, posY,\r\n                              offsetX, offsetY,\r\n                              sizeX, sizeY,\r\n                              velX, velY,\r\n                              reverse, pictures, deadPic);\r\n        });\r\n    });\r\n\r\n    layout.artefacts.forEach(artef => {\r\n        const name = artef.name;\r\n\r\n        artef.positions.forEach(arrPositions => {\r\n            const [posX, posY] = arrPositions;\r\n\r\n            createArtefact(name, posX, posY);\r\n        });\r\n    });\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/createEntities.js","import Entity, {Sides, Trait} from '../Entity';\r\nimport Jump from '../Traits/Jump';\r\nimport Go from '../Traits/Go';\r\nimport Killable from '../Traits/Killable';\r\nimport PendulumWalk from '../Traits/PendulumWalk';\r\nimport Physics from '../Traits/Physics';\r\n\r\nclass Behavior extends Trait{\r\n    constructor() {\r\n        super('behavior');\r\n    }\r\n\r\n    reachEdge(enemy) {\r\n\r\n    }\r\n\r\n    collides(us, them) {\r\n        if (us.killable.dead) {\r\n            return;\r\n        }\r\n\r\n        if (them.stomper) {\r\n            if (them.vel.y > us.vel.y) {\r\n                us.pendulumWalk.speed = 0;\r\n                us.killable.kill();\r\n                them.stomper.bounce();\r\n                us.sounds.playSound('killEnemy');\r\n\r\n            } else {\r\n                them.killable.kill();\r\n                them.sounds.playSound('killHero'); \r\n            }\r\n        }\r\n    }\r\n\r\n    update(entity, deltaTime, sprites) {\r\n        const sequence = Math.floor(entity.lifetime % entity.pictures.length);\r\n        entity.picture = entity.pictures[sequence];\r\n    }\r\n}\r\n\r\nexport function createEnemiesFactory(sprites) {\r\n\r\n    return function createEnemy(name, posX, posY,\r\n                                      offsetX, offsetY,\r\n                                      sizeX, sizeY,\r\n                                      velX, velY,\r\n                                      reverse, pictures, deadPic) {\r\n\r\n        const enemy = new Entity(name);\r\n        enemy.size.set(sizeX, sizeY);\r\n        enemy.pos.set(posX * 37, posY * 37);\r\n        enemy.startPosition.set(posX * 37, posY * 37);\r\n        enemy.vel.set(velX, velY);\r\n        enemy.offset.set(offsetX, offsetY);\r\n        enemy.pictures = reverse ? Array.from(pictures).reverse() : pictures;\r\n        enemy.picture = null;\r\n        enemy.deadPic = deadPic;\r\n\r\n        enemy.addTrait(new Physics());\r\n        enemy.addTrait(new PendulumWalk(reverse));\r\n        enemy.addTrait(new Behavior());\r\n        enemy.addTrait(new Killable());\r\n\r\n        sprites.entities.add(enemy);\r\n    };\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/Entities/Enemies.js","import {Sides, Trait} from '../Entity.js';\r\n\r\nexport default class PendulumWalk extends Trait {\r\n    constructor(reverse) {\r\n        super('pendulumWalk');\r\n        this.speed = reverse ? 30 : -30;\r\n        let randomForPatrol = Math.random() < 0.5 ? 0.5 : Math.random(); \r\n        this.amplitudePatrol = randomForPatrol * 1000;\r\n    }\r\n\r\n    obstruct(entity, side) {\r\n        if (side === Sides.LEFT || side === Sides.RIGHT) {\r\n            this.speed = -this.speed;\r\n        }\r\n    }\r\n\r\n    update(entity, deltaTime) {\r\n        entity.vel.x = this.speed;\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/Traits/PendulumWalk.js","import Entity, {Sides, Trait} from '../Entity';\r\nimport Killable from '../Traits/Killable';\r\n\r\nclass Behavior extends Trait{\r\n    constructor() {\r\n        super('behavior');\r\n    }\r\n\r\n    collides(us, them) {\r\n        if (us.killable.dead) {\r\n            return;\r\n        }\r\n\r\n        if (them.stomper) {\r\n            us.killable.removeAfter = 0;\r\n\r\n            if (us.name.includes('coin')) {\r\n                us.killable.kill();\r\n                them.stateCosmo.coins++;\r\n                them.sounds.playSound('getCoin');\r\n                them.playerController.time++;\r\n            } else if (us.name.includes('key')) {\r\n                us.killable.kill();\r\n                them.stateCosmo.keys++;\r\n                them.sounds.playSound('getCoin');\r\n            } else if (us.name.includes('lock')) {\r\n                if (them.stateCosmo.keys) {\r\n                    us.killable.kill();\r\n                    them.sounds.playSound('openLocks');\r\n                    them.stateCosmo.locks++;\r\n                    them.stateCosmo.keys--;\r\n                    console.log('congratulation - next level');\r\n                } else {\r\n                    console.log('take a key');\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport function createArtefactsFactory(sprites) {\r\n\r\n    return function createArtefact(name, posX, posY) {\r\n\r\n        const artefact = new Entity(name);\r\n        artefact.size.set(23, 23);               //!!! resolve\r\n        artefact.pos.set(posX * 37, posY * 37);  //!!! resolve\r\n        artefact.offset.set(7, 7);\r\n        artefact.picture = name;\r\n\r\n        artefact.addTrait(new Killable());\r\n        artefact.addTrait(new Behavior());\r\n        sprites.entities.add(artefact);\r\n    };\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/Entities/Artefacts.js","import Spritesheet from './spritesheet'\r\n\r\nexport default class Font extends Spritesheet {\r\n    constructor(image,data) {\r\n        super(image, data);\r\n    }\r\n\r\n    print(text, context, x, y, sizeX, sizeY, flip) {\r\n        [...text].forEach( (letter, index) => {\r\n            const buffer = this.tiles.get(`${letter}.png`)[flip ? 1 : 0];\r\n\r\n            context.drawImage(buffer, x + index * sizeX, y, sizeX, sizeY);\r\n        });\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/Font.js","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./style/css/style.css\n// module id = 39\n// module chunks = 0","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./style/scss/style.scss\n// module id = 40\n// module chunks = 0"],"sourceRoot":""}